{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>autoframework - メインページ</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <header>
        <h1>autoframework</h1>
        <nav>
            <ul>
                <li><a href="{% url 'automation:dynamic_form' schema_name='recognition' %}">EDIアラート入力</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section>
            <!-- JSONエクスポート機能 -->
            <p>JSONエクスポート機能:</p>
            <ul>
                <li>
                    <a href="{% url 'automation:export_unified' schema_name='Evaluation' %}" class="button">
                        Evaluation JSON エクスポート
                    </a>
                </li>
                <li>
                    <a href="{% url 'automation:export_unified' schema_name='Decision' %}" class="button">
                        Decision JSON エクスポート
                    </a>
                </li>
                <li>
                    <a href="{% url 'automation:export_unified' schema_name='Recognition' %}" class="button">
                        Recognition JSON エクスポート
                    </a>
                </li>
            </ul>

            <!-- 条件選択付きのエクスポートフォーム -->
            <p>スキーマを選択してエクスポート:</p>
            <form method="get" action="{% url 'automation:export_schema_filtered' %}">
                <label for="ex_schema">スキーマを選択:</label>
                <select id="ex_schema" name="schema_name">
                    <option value="Recognition">Recognition</option>
                    <option value="Evaluation">Evaluation</option>
                    <option value="Decision">Decision</option>
                </select>
                <button type="submit">エクスポート</button>
            </form>

<!--            &lt;!&ndash; 条件選択付きのインポートフォーム &ndash;&gt;-->
<!--            <p>スキーマを選択してインポート:</p>-->
<!--            <form method="post" enctype="multipart/form-data" action="{% url 'automation:import_schema_selected' schema_name='Dummy' %}" id="import-form">-->
<!--                {% csrf_token %}-->
<!--                <label for="schema">スキーマを選択:</label>-->
<!--                <select id="schema" name="schema_name" onchange="updateAction()">-->
<!--                    <option value="Decision">Decision</option>-->
<!--                    <option value="Recognition">Recognition</option>-->
<!--                    <option value="Evaluation">Evaluation</option>-->
<!--&lt;!&ndash;                    <option value="Decision">Decision</option>&ndash;&gt;-->

<!--                </select>-->
<!--                <label for="json_file">JSONファイルを選択:</label>-->
<!--                <input type="file" id="json_file" name="json_file" accept=".json" required>-->
<!--                <button type="submit">インポート</button>-->
<!--            </form>-->

<!--            <script>-->
<!--                function updateAction() {-->
<!--                    const schema = document.getElementById('schema').value;-->
<!--                    const form = document.getElementById('import-form');-->
<!--                    form.action = `/automation/import-filtered/${schema}/`;-->
<!--                }-->
<!--            </script>-->
            <!-- 条件選択付きのインポートフォーム -->

        <p>BBBスキーマを選択してインポート:</p>
<!--        <form method="post" enctype="multipart/form-data" id="import-form">-->
         <form method="post" enctype="multipart/form-data" id="import-select-form">
            {% csrf_token %}

            <label for="in_schema">CCCスキーマを選択:</label>
            <select id="in_schema" name="schema_name" onchange="updateAction()">
<!--                <option value="Recognition">Recognition</option>-->
                <option value="Evaluation">Evaluation</option>
                <option value="Decision">Decision</option>
            </select>

            <label for="json_file">AAAJSONファイルを選択:</label>
            <input type="file" id="json_file" name="json_file" accept=".json" required>
            <button type="submit">インポート</button>
        </form>

        <script>
            function updateAction() {
                // form.action の値をコンソールに出力
                console.log("スタート");

                const schema = document.getElementById('in_schema').value;
                const form = document.getElementById('import-select-form');
                form.action = `/automation/import-filtered/${schema}/`;

                // form.action の値をコンソールに出力
                console.log("現在のinフォームアクション: ", form.action);
            }

            // ページ読み込み時に初期値をセット
            window.onload = updateAction;
        </script>

        </section>
    </main>

    <footer>
        <p>&copy; 2025 Your Team Name. All rights reserved.</p>
    </footer>
</body>
</html>


